<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
  <head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8" />
    <title>Log Search Server</title>
    <link rel="stylesheet" href="/stylesheets/app.css" type="text/css" media="screen"> 
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js" type="text/javascript"></script>
  </head>
  <body>
    <div id='header' style="width:auto; height: 50px; padding: 10px; border-bottom: 1px solid #ddd; margin: -5px -10px 10px; background: #f0f0f0;">
      <h3>
        <a href='/'>Log Search Server</a>
        &nbsp; &nbsp; 
        <a href='/search'>Search Logs</a>
        &nbsp; &nbsp; 
        <a href='/tail'>Tail Current Log</a>
      </h3>
      <form id="search" action="/search" method="get">
        <input type="hidden" name="hl" value="en" />
        Log file:
        <select name="file">
          <%= logfiles.map { |f| "<option value=#{f.inspect} #{'selected' if f == @params['file'] rescue nil}>#{File.basename(f)}</option>" } %>
        </select> 
        &nbsp;&nbsp;&nbsp;        
        Store Url: <input type='text' id='shop-url' name='shop' value="<%= @params['shop'] rescue nil%>" />
        &nbsp;&nbsp;&nbsp;
        Search Term: 
        <input type="search" id="search-text" name="q" value="<%= @params['q'] rescue nil %>" style="width: 200px;"/> 
        
        &nbsp;&nbsp;&nbsp;
        <input type="submit" value="Search" /><br/>
      </form>
    </div>
